{%- comment -%}
  Content Modules für Autoschilder Express
  Feature Cards, Services, Insurance CTA, Pricing
{%- endcomment -%}

<section 
  class="ae-content-modules"
  data-section-id="{{ section.id }}"
  style="
    --ae-module-padding-top: {{ section.settings.padding_top_mobile }}px;
    --ae-module-padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
    --ae-module-padding-top-desktop: {{ section.settings.padding_top_desktop }}px;
    --ae-module-padding-bottom-desktop: {{ section.settings.padding_bottom_desktop }}px;
  "
>
  <div class="ae-container">
    
    {%- comment -%} Section Header {%- endcomment -%}
    {%- if section.settings.heading != blank or section.settings.description != blank -%}
      <div class="ae-module__header">
        {%- if section.settings.heading != blank -%}
          <h2 class="ae-module__heading" data-aos="fade-up">
            {{ section.settings.heading }}
          </h2>
        {%- endif -%}
        {%- if section.settings.description != blank -%}
          <p class="ae-module__description" data-aos="fade-up" data-aos-delay="100">
            {{ section.settings.description }}
          </p>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- comment -%} Blocks Rendering {%- endcomment -%}
    {%- if section.blocks.size > 0 -%}
      <div class="ae-module__blocks">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            
            {%- comment -%} Feature Cards Grid {%- endcomment -%}
            {%- when 'feature_cards' -%}
              <div 
                class="ae-feature-cards" 
                {{ block.shopify_attributes }}
                data-aos="fade-up"
                data-aos-delay="{{ forloop.index | times: 100 }}"
              >
                <div class="ae-feature-cards__grid ae-feature-cards__grid--{{ block.settings.columns }}">
                  {%- for i in (1..4) -%}
                    {%- assign icon_key = 'icon_' | append: i -%}
                    {%- assign title_key = 'title_' | append: i -%}
                    {%- assign desc_key = 'description_' | append: i -%}
                    
                    {%- if block.settings[title_key] != blank -%}
                      <div class="ae-feature-card">
                        {%- if block.settings[icon_key] != blank -%}
                          <div class="ae-feature-card__icon">
                            {{ block.settings[icon_key] }}
                          </div>
                        {%- endif -%}
                        <h3 class="ae-feature-card__title">{{ block.settings[title_key] }}</h3>
                        {%- if block.settings[desc_key] != blank -%}
                          <p class="ae-feature-card__desc">{{ block.settings[desc_key] }}</p>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                  {%- endfor -%}
                </div>
              </div>

            {%- comment -%} Service Grid (2-Column Layout) {%- endcomment -%}
            {%- when 'service_grid' -%}
              <div 
                class="ae-service-grid" 
                {{ block.shopify_attributes }}
                data-aos="fade-up"
                data-aos-delay="{{ forloop.index | times: 100 }}"
              >
                {%- if block.settings.service_heading != blank -%}
                  <h3 class="ae-service-grid__heading">{{ block.settings.service_heading }}</h3>
                {%- endif -%}
                
                <div class="ae-service-grid__items">
                  {%- for i in (1..3) -%}
                    {%- assign title_key = 'service_title_' | append: i -%}
                    {%- assign desc_key = 'service_desc_' | append: i -%}
                    {%- assign link_key = 'service_link_' | append: i -%}
                    {%- assign icon_key = 'service_icon_' | append: i -%}
                    
                    {%- if block.settings[title_key] != blank -%}
                      <a href="{{ block.settings[link_key] }}" class="ae-service-card">
                        <div class="ae-service-card__icon">
                          {{ block.settings[icon_key] | default: '📋' }}
                        </div>
                        <div class="ae-service-card__content">
                          <h4 class="ae-service-card__title">{{ block.settings[title_key] }}</h4>
                          <p class="ae-service-card__desc">{{ block.settings[desc_key] }}</p>
                          <span class="ae-service-card__arrow">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                              <path d="M4 10h12m0 0l-4-4m4 4l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                          </span>
                        </div>
                      </a>
                    {%- endif -%}
                  {%- endfor -%}
                </div>

                {%- comment -%} Process Steps {%- endcomment -%}
                {%- if block.settings.show_process -%}
                  <div class="ae-process-steps">
                    <h4 class="ae-process-steps__title">{{ block.settings.process_title | default: "So funktioniert's" }}</h4>
                    <div class="ae-process-steps__grid">
                      {%- for i in (1..3) -%}
                        {%- assign step_key = 'process_step_' | append: i -%}
                        {%- if block.settings[step_key] != blank -%}
                          <div class="ae-process-step">
                            <span class="ae-process-step__number">{{ i }}</span>
                            <p class="ae-process-step__text">{{ block.settings[step_key] }}</p>
                          </div>
                        {%- endif -%}
                      {%- endfor -%}
                    </div>
                    {%- if block.settings.process_cta_text != blank -%}
                      <a href="{{ block.settings.process_cta_link }}" class="ae-btn ae-btn--primary">
                        {{ block.settings.process_cta_text }}
                      </a>
                    {%- endif -%}
                  </div>
                {%- endif -%}
              </div>

            {%- comment -%} Insurance CTA (Orange Accent Block) {%- endcomment -%}
            {%- when 'insurance_cta' -%}
              <div 
                class="ae-insurance-cta" 
                {{ block.shopify_attributes }}
                data-aos="fade-up"
                data-aos-delay="{{ forloop.index | times: 100 }}"
              >
                <div class="ae-insurance-cta__content">
                  {%- if block.settings.insurance_heading != blank -%}
                    <h3 class="ae-insurance-cta__heading">{{ block.settings.insurance_heading }}</h3>
                  {%- endif -%}
                  {%- if block.settings.insurance_desc != blank -%}
                    <p class="ae-insurance-cta__desc">{{ block.settings.insurance_desc }}</p>
                  {%- endif -%}
                  
                  <div class="ae-insurance-cta__options">
                    {%- if block.settings.option_1_title != blank -%}
                      <div class="ae-insurance-option">
                        <h4 class="ae-insurance-option__title">{{ block.settings.option_1_title }}</h4>
                        <p class="ae-insurance-option__desc">{{ block.settings.option_1_desc }}</p>
                        {%- if block.settings.option_1_cta != blank -%}
                          <a href="{{ block.settings.option_1_link }}" class="ae-btn ae-btn--secondary-inverted">
                            {{ block.settings.option_1_cta }}
                          </a>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                    
                    {%- if block.settings.option_2_title != blank -%}
                      <div class="ae-insurance-option">
                        <h4 class="ae-insurance-option__title">{{ block.settings.option_2_title }}</h4>
                        <p class="ae-insurance-option__desc">{{ block.settings.option_2_desc }}</p>
                        {%- if block.settings.option_2_cta != blank -%}
                          <a href="{{ block.settings.option_2_link }}" class="ae-btn ae-btn--secondary-inverted">
                            {{ block.settings.option_2_cta }}
                          </a>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                  </div>
                </div>
              </div>

            {%- comment -%} Pricing Cards {%- endcomment -%}
            {%- when 'pricing_cards' -%}
              <div 
                class="ae-pricing-cards" 
                {{ block.shopify_attributes }}
                data-aos="fade-up"
                data-aos-delay="{{ forloop.index | times: 100 }}"
              >
                {%- if block.settings.pricing_heading != blank -%}
                  <h3 class="ae-pricing-cards__heading">{{ block.settings.pricing_heading }}</h3>
                {%- endif -%}
                
                <div class="ae-pricing-cards__grid">
                  {%- for i in (1..3) -%}
                    {%- assign name_key = 'price_name_' | append: i -%}
                    {%- assign price_key = 'price_amount_' | append: i -%}
                    {%- assign desc_key = 'price_desc_' | append: i -%}
                    {%- assign features_key = 'price_features_' | append: i -%}
                    {%- assign cta_key = 'price_cta_' | append: i -%}
                    {%- assign link_key = 'price_link_' | append: i -%}
                    {%- assign badge_key = 'price_badge_' | append: i -%}
                    
                    {%- if block.settings[name_key] != blank -%}
                      <div class="ae-pricing-card {% if block.settings[badge_key] != blank %}ae-pricing-card--featured{% endif %}">
                        {%- if block.settings[badge_key] != blank -%}
                          <span class="ae-pricing-card__badge">{{ block.settings[badge_key] }}</span>
                        {%- endif -%}
                        
                        <h4 class="ae-pricing-card__name">{{ block.settings[name_key] }}</h4>
                        
                        {%- if block.settings[price_key] != blank -%}
                          <div class="ae-pricing-card__price">
                            <span class="ae-pricing-card__amount">{{ block.settings[price_key] }}</span>
                            <span class="ae-pricing-card__currency">€</span>
                          </div>
                        {%- endif -%}
                        
                        {%- if block.settings[desc_key] != blank -%}
                          <p class="ae-pricing-card__desc">{{ block.settings[desc_key] }}</p>
                        {%- endif -%}
                        
                        {%- if block.settings[features_key] != blank -%}
                          <ul class="ae-pricing-card__features">
                            {%- assign features = block.settings[features_key] | split: '|' -%}
                            {%- for feature in features -%}
                              <li>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                  <path d="M3 8l3 3 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                {{ feature }}
                              </li>
                            {%- endfor -%}
                          </ul>
                        {%- endif -%}
                        
                        {%- if block.settings[cta_key] != blank -%}
                          <a href="{{ block.settings[link_key] }}" class="ae-btn {% if block.settings[badge_key] != blank %}ae-btn--primary{% else %}ae-btn--secondary{% endif %}">
                            {{ block.settings[cta_key] }}
                          </a>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                  {%- endfor -%}
                </div>
              </div>

            {%- comment -%} Trust Layer {%- endcomment -%}
            {%- when 'trust_layer' -%}
              <div 
                class="ae-trust-layer" 
                {{ block.shopify_attributes }}
                data-aos="fade-up"
                data-aos-delay="{{ forloop.index | times: 100 }}"
              >
                {%- if block.settings.trust_heading != blank -%}
                  <h3 class="ae-trust-layer__heading">{{ block.settings.trust_heading }}</h3>
                {%- endif -%}
                
                <div class="ae-trust-layer__content">
                  {%- if block.settings.trust_text != blank -%}
                    <div class="ae-trust-layer__text">
                      {{ block.settings.trust_text }}
                    </div>
                  {%- endif -%}
                  
                  {%- if block.settings.show_seals -%}
                    <div class="ae-trust-layer__seals">
                      {%- for i in (1..4) -%}
                        {%- assign seal_key = 'seal_' | append: i -%}
                        {%- if block.settings[seal_key] != blank -%}
                          <div class="ae-trust-seal">
                            {{- block.settings[seal_key] | image_url: width: 120 | image_tag:
                              loading: 'lazy',
                              class: 'ae-trust-seal__image',
                              alt: 'Trust Seal'
                            -}}
                          </div>
                        {%- endif -%}
                      {%- endfor -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>

          {%- endcase -%}
        {%- endfor -%}
      </div>
    {%- endif -%}

  </div>
</section>

{% schema %}
{
  "name": "AE Content Modules",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 20,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding oben (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 20,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding unten (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 40,
      "max": 200,
      "step": 8,
      "unit": "px",
      "label": "Padding oben (Desktop)",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 40,
      "max": 200,
      "step": 8,
      "unit": "px",
      "label": "Padding unten (Desktop)",
      "default": 80
    },
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Überschrift"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Beschreibung"
    }
  ],
  "blocks": [
    {
      "type": "feature_cards",
      "name": "Feature Cards",
      "settings": [
        {
          "type": "select",
          "id": "columns",
          "label": "Spalten",
          "options": [
            {"value": "2", "label": "2 Spalten"},
            {"value": "3", "label": "3 Spalten"},
            {"value": "4", "label": "4 Spalten"}
          ],
          "default": "4"
        },
        {
          "type": "header",
          "content": "Feature 1"
        },
        {
          "type": "text",
          "id": "icon_1",
          "label": "Icon (Emoji oder SVG)",
          "default": "🚚"
        },
        {
          "type": "text",
          "id": "title_1",
          "label": "Titel",
          "default": "Express-Lieferung in 24h"
        },
        {
          "type": "textarea",
          "id": "description_1",
          "label": "Beschreibung",
          "default": "Schnelle Lieferung deutschlandweit"
        },
        {
          "type": "header",
          "content": "Feature 2"
        },
        {
          "type": "text",
          "id": "icon_2",
          "label": "Icon",
          "default": "✓"
        },
        {
          "type": "text",
          "id": "title_2",
          "label": "Titel",
          "default": "Amtlich zertifiziert"
        },
        {
          "type": "textarea",
          "id": "description_2",
          "label": "Beschreibung",
          "default": "Geprüfte Premium-Qualität"
        },
        {
          "type": "header",
          "content": "Feature 3"
        },
        {
          "type": "text",
          "id": "icon_3",
          "label": "Icon",
          "default": "🌐"
        },
        {
          "type": "text",
          "id": "title_3",
          "label": "Titel",
          "default": "Bundesweit digital"
        },
        {
          "type": "textarea",
          "id": "description_3",
          "label": "Beschreibung",
          "default": "Online-Zulassung überall"
        },
        {
          "type": "header",
          "content": "Feature 4"
        },
        {
          "type": "text",
          "id": "icon_4",
          "label": "Icon",
          "default": "💰"
        },
        {
          "type": "text",
          "id": "title_4",
          "label": "Titel",
          "default": "Transparente Preise"
        },
        {
          "type": "textarea",
          "id": "description_4",
          "label": "Beschreibung",
          "default": "Keine versteckten Kosten"
        }
      ]
    },
    {
      "type": "service_grid",
      "name": "Service Grid",
      "settings": [
        {
          "type": "text",
          "id": "service_heading",
          "label": "Überschrift",
          "default": "Online Services"
        },
        {
          "type": "header",
          "content": "Service 1"
        },
        {
          "type": "text",
          "id": "service_icon_1",
          "label": "Icon",
          "default": "📝"
        },
        {
          "type": "text",
          "id": "service_title_1",
          "label": "Titel",
          "default": "Neuzulassung"
        },
        {
          "type": "textarea",
          "id": "service_desc_1",
          "label": "Beschreibung",
          "default": "Fahrzeug komplett digital anmelden"
        },
        {
          "type": "url",
          "id": "service_link_1",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Service 2"
        },
        {
          "type": "text",
          "id": "service_icon_2",
          "label": "Icon",
          "default": "🚫"
        },
        {
          "type": "text",
          "id": "service_title_2",
          "label": "Titel",
          "default": "Abmeldung"
        },
        {
          "type": "textarea",
          "id": "service_desc_2",
          "label": "Beschreibung",
          "default": "Fahrzeug schnell und einfach abmelden"
        },
        {
          "type": "url",
          "id": "service_link_2",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Service 3"
        },
        {
          "type": "text",
          "id": "service_icon_3",
          "label": "Icon",
          "default": "🔄"
        },
        {
          "type": "text",
          "id": "service_title_3",
          "label": "Titel",
          "default": "Halterwechsel"
        },
        {
          "type": "textarea",
          "id": "service_desc_3",
          "label": "Beschreibung",
          "default": "Besitzerwechsel digital durchführen"
        },
        {
          "type": "url",
          "id": "service_link_3",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Process Steps"
        },
        {
          "type": "checkbox",
          "id": "show_process",
          "label": "Prozess-Schritte anzeigen",
          "default": true
        },
        {
          "type": "text",
          "id": "process_title",
          "label": "Prozess Titel",
          "default": "So funktioniert's"
        },
        {
          "type": "text",
          "id": "process_step_1",
          "label": "Schritt 1",
          "default": "Daten eingeben"
        },
        {
          "type": "text",
          "id": "process_step_2",
          "label": "Schritt 2",
          "default": "Dokumente hochladen"
        },
        {
          "type": "text",
          "id": "process_step_3",
          "label": "Schritt 3",
          "default": "Fertig!"
        },
        {
          "type": "text",
          "id": "process_cta_text",
          "label": "CTA Text",
          "default": "Jetzt starten"
        },
        {
          "type": "url",
          "id": "process_cta_link",
          "label": "CTA Link"
        }
      ]
    },
    {
      "type": "insurance_cta",
      "name": "Insurance CTA",
      "settings": [
        {
          "type": "text",
          "id": "insurance_heading",
          "label": "Überschrift",
          "default": "Versicherungen"
        },
        {
          "type": "textarea",
          "id": "insurance_desc",
          "label": "Beschreibung",
          "default": "Schnell und unkompliziert die passende Versicherung abschließen"
        },
        {
          "type": "header",
          "content": "Option 1"
        },
        {
          "type": "text",
          "id": "option_1_title",
          "label": "Titel",
          "default": "Kurzzeitversicherung"
        },
        {
          "type": "text",
          "id": "option_1_desc",
          "label": "Beschreibung",
          "default": "5-Tages-Schutz für Überführungen"
        },
        {
          "type": "text",
          "id": "option_1_cta",
          "label": "CTA Text",
          "default": "Jetzt abschließen"
        },
        {
          "type": "url",
          "id": "option_1_link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Option 2"
        },
        {
          "type": "text",
          "id": "option_2_title",
          "label": "Titel",
          "default": "Zollversicherung"
        },
        {
          "type": "text",
          "id": "option_2_desc",
          "label": "Beschreibung",
          "default": "Für Fahrzeuge aus dem Ausland"
        },
        {
          "type": "text",
          "id": "option_2_cta",
          "label": "CTA Text",
          "default": "Mehr erfahren"
        },
        {
          "type": "url",
          "id": "option_2_link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "pricing_cards",
      "name": "Pricing Cards",
      "settings": [
        {
          "type": "text",
          "id": "pricing_heading",
          "label": "Überschrift",
          "default": "Preise"
        },
        {
          "type": "header",
          "content": "Preis 1"
        },
        {
          "type": "text",
          "id": "price_name_1",
          "label": "Name",
          "default": "Standard Kennzeichen"
        },
        {
          "type": "text",
          "id": "price_amount_1",
          "label": "Preis",
          "default": "9,95"
        },
        {
          "type": "text",
          "id": "price_desc_1",
          "label": "Beschreibung",
          "default": "Ab"
        },
        {
          "type": "textarea",
          "id": "price_features_1",
          "label": "Features (mit | trennen)",
          "default": "Amtlich zertifiziert|Express-Lieferung|Premium-Qualität"
        },
        {
          "type": "text",
          "id": "price_cta_1",
          "label": "CTA Text",
          "default": "Bestellen"
        },
        {
          "type": "url",
          "id": "price_link_1",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "price_badge_1",
          "label": "Badge (optional)"
        },
        {
          "type": "header",
          "content": "Preis 2"
        },
        {
          "type": "text",
          "id": "price_name_2",
          "label": "Name",
          "default": "Zulassungspaket"
        },
        {
          "type": "text",
          "id": "price_amount_2",
          "label": "Preis",
          "default": "49,95"
        },
        {
          "type": "text",
          "id": "price_desc_2",
          "label": "Beschreibung",
          "default": "Ab"
        },
        {
          "type": "textarea",
          "id": "price_features_2",
          "label": "Features",
          "default": "Kennzeichen inklusive|Online-Zulassung|Expressbearbeitung"
        },
        {
          "type": "text",
          "id": "price_cta_2",
          "label": "CTA Text",
          "default": "Jetzt starten"
        },
        {
          "type": "url",
          "id": "price_link_2",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "price_badge_2",
          "label": "Badge",
          "default": "Beliebt"
        },
        {
          "type": "header",
          "content": "Preis 3"
        },
        {
          "type": "text",
          "id": "price_name_3",
          "label": "Name",
          "default": "Premium Paket"
        },
        {
          "type": "text",
          "id": "price_amount_3",
          "label": "Preis",
          "default": "79,95"
        },
        {
          "type": "text",
          "id": "price_desc_3",
          "label": "Beschreibung",
          "default": "Ab"
        },
        {
          "type": "textarea",
          "id": "price_features_3",
          "label": "Features",
          "default": "Alles aus Zulassungspaket|Versicherung inklusive|Prioritäts-Support"
        },
        {
          "type": "text",
          "id": "price_cta_3",
          "label": "CTA Text",
          "default": "Premium wählen"
        },
        {
          "type": "url",
          "id": "price_link_3",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "price_badge_3",
          "label": "Badge"
        }
      ]
    },
    {
      "type": "trust_layer",
      "name": "Trust Layer",
      "settings": [
        {
          "type": "text",
          "id": "trust_heading",
          "label": "Überschrift",
          "default": "Vertrauen & Sicherheit"
        },
        {
          "type": "richtext",
          "id": "trust_text",
          "label": "Text",
          "default": "<p>Autoschilder Express ist Ihr zuverlässiger Partner für Kfz-Kennzeichen und digitale Zulassungen. Wir arbeiten nach höchsten Qualitätsstandards und sind amtlich zertifiziert.</p>"
        },
        {
          "type": "checkbox",
          "id": "show_seals",
          "label": "Siegel anzeigen",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "seal_1",
          "label": "Siegel 1"
        },
        {
          "type": "image_picker",
          "id": "seal_2",
          "label": "Siegel 2"
        },
        {
          "type": "image_picker",
          "id": "seal_3",
          "label": "Siegel 3"
        },
        {
          "type": "image_picker",
          "id": "seal_4",
          "label": "Siegel 4"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "AE Content Modules",
      "blocks": [
        {
          "type": "feature_cards"
        },
        {
          "type": "service_grid"
        },
        {
          "type": "insurance_cta"
        },
        {
          "type": "pricing_cards"
        }
      ]
    }
  ]
}
{% endschema %}

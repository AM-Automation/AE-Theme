{%- comment -%}
  Footer für Autoschilder Express
  Spalten-Layout inspiriert von MongoDB
{%- endcomment -%}

<footer 
  class="ae-footer" 
  data-section-id="{{ section.id }}"
  role="contentinfo"
>
  <div class="ae-container">
    
    {%- comment -%} Main Footer Content {%- endcomment -%}
    <div class="ae-footer__main">
      <div class="ae-footer__grid">
        
        {%- comment -%} Brand Column {%- endcomment -%}
        <div class="ae-footer__column ae-footer__column--brand">
          {%- if section.settings.footer_logo != blank -%}
            <div class="ae-footer__logo">
              {{- section.settings.footer_logo | image_url: width: 180 | image_tag:
                loading: 'lazy',
                widths: '90, 120, 180',
                class: 'ae-footer__logo-image',
                alt: shop.name
              -}}
            </div>
          {%- else -%}
            <div class="ae-footer__logo-text">
              {{ section.settings.footer_logo_text | default: 'Autoschilder Express' }}
            </div>
          {%- endif -%}
          
          {%- if section.settings.footer_tagline != blank -%}
            <p class="ae-footer__tagline">{{ section.settings.footer_tagline }}</p>
          {%- endif -%}
          
          {%- comment -%} Social Links {%- endcomment -%}
          {%- if section.settings.show_social -%}
            <div class="ae-footer__social">
              {%- if section.settings.social_instagram != blank -%}
                <a href="{{ section.settings.social_instagram }}" class="ae-social-link" aria-label="Instagram" target="_blank" rel="noopener">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/>
                    <circle cx="18" cy="6" r="1" fill="currentColor"/>
                  </svg>
                </a>
              {%- endif -%}
              {%- if section.settings.social_tiktok != blank -%}
                <a href="{{ section.settings.social_tiktok }}" class="ae-social-link" aria-label="TikTok" target="_blank" rel="noopener">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M19 10.5V8.8c-1.5 0-2.9-.6-3.9-1.6-.9-.9-1.5-2.1-1.6-3.4h-2.8v12.9c0 1.4-1.1 2.5-2.5 2.5s-2.5-1.1-2.5-2.5 1.1-2.5 2.5-2.5c.3 0 .5 0 .8.1V11c-.3 0-.5-.1-.8-.1-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5V9.5c1.1.7 2.4 1.1 3.8 1.1v-2.1z" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </a>
              {%- endif -%}
              {%- if section.settings.social_linkedin != blank -%}
                <a href="{{ section.settings.social_linkedin }}" class="ae-social-link" aria-label="LinkedIn" target="_blank" rel="noopener">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="2" y="2" width="20" height="20" rx="2" stroke="currentColor" stroke-width="2"/>
                    <path d="M8 11v6M8 8v.01M12 16v-5M16 16v-3a2 2 0 00-4 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </a>
              {%- endif -%}
              {%- if section.settings.social_facebook != blank -%}
                <a href="{{ section.settings.social_facebook }}" class="ae-social-link" aria-label="Facebook" target="_blank" rel="noopener">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </a>
              {%- endif -%}
            </div>
          {%- endif -%}
        </div>

        {%- comment -%} Menu Columns {%- endcomment -%}
        {%- for block in section.blocks -%}
          {%- if block.type == 'menu_column' -%}
            <div class="ae-footer__column" {{ block.shopify_attributes }}>
              {%- if block.settings.heading != blank -%}
                <h3 class="ae-footer__heading">{{ block.settings.heading }}</h3>
              {%- endif -%}
              
              {%- if block.settings.menu != blank -%}
                <ul class="ae-footer__menu">
                  {%- for link in linklists[block.settings.menu].links -%}
                    <li class="ae-footer__menu-item">
                      <a href="{{ link.url }}" class="ae-footer__menu-link">
                        {{ link.title }}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </div>
          {%- endif -%}
        {%- endfor -%}

        {%- comment -%} Newsletter Column {%- endcomment -%}
        {%- if section.settings.show_newsletter -%}
          <div class="ae-footer__column ae-footer__column--newsletter">
            <h3 class="ae-footer__heading">{{ section.settings.newsletter_heading | default: 'Newsletter' }}</h3>
            <p class="ae-footer__newsletter-text">{{ section.settings.newsletter_text }}</p>
            
            <form action="/contact#newsletter" method="post" class="ae-newsletter-form" accept-charset="UTF-8">
              <input type="hidden" name="contact[tags]" value="newsletter">
              <div class="ae-newsletter-form__wrapper">
                <input 
                  type="email" 
                  name="contact[email]" 
                  class="ae-newsletter-form__input" 
                  placeholder="Ihre E-Mail"
                  aria-label="E-Mail für Newsletter"
                  required
                >
                <button type="submit" class="ae-newsletter-form__submit" aria-label="Newsletter abonnieren">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M4 10h12m0 0l-4-4m4 4l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </button>
              </div>
            </form>
          </div>
        {%- endif -%}

      </div>
    </div>

    {%- comment -%} Footer Bottom {%- endcomment -%}
    <div class="ae-footer__bottom">
      <div class="ae-footer__bottom-content">
        <p class="ae-footer__copyright">
          &copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. Alle Rechte vorbehalten.
        </p>
        
        {%- if section.settings.show_payment_icons -%}
          <div class="ae-footer__payment">
            {%- for type in shop.enabled_payment_types -%}
              {{ type | payment_type_svg_tag: class: 'ae-payment-icon' }}
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </div>

  </div>
</footer>

{% schema %}
{
  "name": "AE Footer",
  "tag": "footer",
  "class": "section-footer",
  "settings": [
    {
      "type": "header",
      "content": "Brand"
    },
    {
      "type": "image_picker",
      "id": "footer_logo",
      "label": "Logo"
    },
    {
      "type": "text",
      "id": "footer_logo_text",
      "label": "Logo Text (falls kein Bild)",
      "default": "Autoschilder Express"
    },
    {
      "type": "textarea",
      "id": "footer_tagline",
      "label": "Tagline",
      "default": "Ihr zuverlässiger Partner für Kfz-Kennzeichen und digitale Zulassungen."
    },
    {
      "type": "header",
      "content": "Social Media"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Social Links anzeigen",
      "default": true
    },
    {
      "type": "url",
      "id": "social_instagram",
      "label": "Instagram URL"
    },
    {
      "type": "url",
      "id": "social_tiktok",
      "label": "TikTok URL"
    },
    {
      "type": "url",
      "id": "social_linkedin",
      "label": "LinkedIn URL"
    },
    {
      "type": "url",
      "id": "social_facebook",
      "label": "Facebook URL"
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Newsletter anzeigen",
      "default": true
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter Überschrift",
      "default": "Newsletter"
    },
    {
      "type": "textarea",
      "id": "newsletter_text",
      "label": "Newsletter Text",
      "default": "Bleiben Sie auf dem Laufenden mit Angeboten und News."
    },
    {
      "type": "header",
      "content": "Footer Bottom"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Zahlungsarten anzeigen",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "menu_column",
      "name": "Menü Spalte",
      "limit": 4,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Überschrift",
          "default": "Produkte"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menü"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "AE Footer",
      "blocks": [
        {
          "type": "menu_column",
          "settings": {
            "heading": "Produkte"
          }
        },
        {
          "type": "menu_column",
          "settings": {
            "heading": "Services"
          }
        },
        {
          "type": "menu_column",
          "settings": {
            "heading": "Rechtliches"
          }
        }
      ]
    }
  ]
}
{% endschema %}
